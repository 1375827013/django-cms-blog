{% extends 'base.html' %}
{% block title %}å¤§å­¦æŸ¥è¯¢ - é«˜è€ƒå¿—æ„¿å¡«æŠ¥åŠ©æ‰‹{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2 style="margin-bottom: 20px;">ğŸ“ å¤§å­¦æŸ¥è¯¢</h2>
    
    <div class="card mb-4" style="padding: 20px; background: #f8f9fa; border: none; border-radius: 12px;">
        <form method="get" class="row align-items-end">
            <div class="col-md-4 mb-2">
                <label style="font-weight: 500; margin-bottom: 8px; display: block;">çœä»½ç­›é€‰</label>
                <select name="province" class="form-control" style="border-radius: 8px;">
                    <option value="">å…¨éƒ¨çœä»½</option>
                    <optgroup label="ç›´è¾–å¸‚">
                        <option value="åŒ—äº¬" {% if province_filter == 'åŒ—äº¬' %}selected{% endif %}>åŒ—äº¬</option>
                        <option value="ä¸Šæµ·" {% if province_filter == 'ä¸Šæµ·' %}selected{% endif %}>ä¸Šæµ·</option>
                        <option value="å¤©æ´¥" {% if province_filter == 'å¤©æ´¥' %}selected{% endif %}>å¤©æ´¥</option>
                        <option value="é‡åº†" {% if province_filter == 'é‡åº†' %}selected{% endif %}>é‡åº†</option>
                    </optgroup>
                    <optgroup label="ååŒ—åœ°åŒº">
                        <option value="æ²³åŒ—" {% if province_filter == 'æ²³åŒ—' %}selected{% endif %}>æ²³åŒ—</option>
                        <option value="å±±è¥¿" {% if province_filter == 'å±±è¥¿' %}selected{% endif %}>å±±è¥¿</option>
                        <option value="å†…è’™å¤" {% if province_filter == 'å†…è’™å¤' %}selected{% endif %}>å†…è’™å¤</option>
                    </optgroup>
                    <optgroup label="ä¸œåŒ—åœ°åŒº">
                        <option value="è¾½å®" {% if province_filter == 'è¾½å®' %}selected{% endif %}>è¾½å®</option>
                        <option value="å‰æ—" {% if province_filter == 'å‰æ—' %}selected{% endif %}>å‰æ—</option>
                        <option value="é»‘é¾™æ±Ÿ" {% if province_filter == 'é»‘é¾™æ±Ÿ' %}selected{% endif %}>é»‘é¾™æ±Ÿ</option>
                    </optgroup>
                    <optgroup label="åä¸œåœ°åŒº">
                        <option value="æ±Ÿè‹" {% if province_filter == 'æ±Ÿè‹' %}selected{% endif %}>æ±Ÿè‹</option>
                        <option value="æµ™æ±Ÿ" {% if province_filter == 'æµ™æ±Ÿ' %}selected{% endif %}>æµ™æ±Ÿ</option>
                        <option value="å®‰å¾½" {% if province_filter == 'å®‰å¾½' %}selected{% endif %}>å®‰å¾½</option>
                        <option value="ç¦å»º" {% if province_filter == 'ç¦å»º' %}selected{% endif %}>ç¦å»º</option>
                        <option value="æ±Ÿè¥¿" {% if province_filter == 'æ±Ÿè¥¿' %}selected{% endif %}>æ±Ÿè¥¿</option>
                        <option value="å±±ä¸œ" {% if province_filter == 'å±±ä¸œ' %}selected{% endif %}>å±±ä¸œ</option>
                    </optgroup>
                    <optgroup label="åä¸­åœ°åŒº">
                        <option value="æ²³å—" {% if province_filter == 'æ²³å—' %}selected{% endif %}>æ²³å—</option>
                        <option value="æ¹–åŒ—" {% if province_filter == 'æ¹–åŒ—' %}selected{% endif %}>æ¹–åŒ—</option>
                        <option value="æ¹–å—" {% if province_filter == 'æ¹–å—' %}selected{% endif %}>æ¹–å—</option>
                    </optgroup>
                    <optgroup label="åå—åœ°åŒº">
                        <option value="å¹¿ä¸œ" {% if province_filter == 'å¹¿ä¸œ' %}selected{% endif %}>å¹¿ä¸œ</option>
                        <option value="å¹¿è¥¿" {% if province_filter == 'å¹¿è¥¿' %}selected{% endif %}>å¹¿è¥¿</option>
                        <option value="æµ·å—" {% if province_filter == 'æµ·å—' %}selected{% endif %}>æµ·å—</option>
                    </optgroup>
                    <optgroup label="è¥¿å—åœ°åŒº">
                        <option value="å››å·" {% if province_filter == 'å››å·' %}selected{% endif %}>å››å·</option>
                        <option value="è´µå·" {% if province_filter == 'è´µå·' %}selected{% endif %}>è´µå·</option>
                        <option value="äº‘å—" {% if province_filter == 'äº‘å—' %}selected{% endif %}>äº‘å—</option>
                        <option value="è¥¿è—" {% if province_filter == 'è¥¿è—' %}selected{% endif %}>è¥¿è—</option>
                    </optgroup>
                    <optgroup label="è¥¿åŒ—åœ°åŒº">
                        <option value="é™•è¥¿" {% if province_filter == 'é™•è¥¿' %}selected{% endif %}>é™•è¥¿</option>
                        <option value="ç”˜è‚ƒ" {% if province_filter == 'ç”˜è‚ƒ' %}selected{% endif %}>ç”˜è‚ƒ</option>
                        <option value="é’æµ·" {% if province_filter == 'é’æµ·' %}selected{% endif %}>é’æµ·</option>
                        <option value="å®å¤" {% if province_filter == 'å®å¤' %}selected{% endif %}>å®å¤</option>
                        <option value="æ–°ç–†" {% if province_filter == 'æ–°ç–†' %}selected{% endif %}>æ–°ç–†</option>
                    </optgroup>
                    <optgroup label="æ¸¯æ¾³å°">
                        <option value="é¦™æ¸¯" {% if province_filter == 'é¦™æ¸¯' %}selected{% endif %}>é¦™æ¸¯</option>
                        <option value="æ¾³é—¨" {% if province_filter == 'æ¾³é—¨' %}selected{% endif %}>æ¾³é—¨</option>
                        <option value="å°æ¹¾" {% if province_filter == 'å°æ¹¾' %}selected{% endif %}>å°æ¹¾</option>
                    </optgroup>
                </select>
            </div>
            <div class="col-md-4 mb-2">
                <label style="font-weight: 500; margin-bottom: 8px; display: block;">åŠå­¦ç±»å‹</label>
                <select name="type" class="form-control" style="border-radius: 8px;">
                    <option value="">å…¨éƒ¨ç±»å‹</option>
                    <option value="985" {% if type_filter == '985' %}selected{% endif %}>985å·¥ç¨‹</option>
                    <option value="211" {% if type_filter == '211' %}selected{% endif %}>211å·¥ç¨‹</option>
                    <option value="åŒä¸€æµ" {% if type_filter == 'åŒä¸€æµ' %}selected{% endif %}>åŒä¸€æµ</option>
                    <option value="æ™®é€šæœ¬ç§‘" {% if type_filter == 'æ™®é€šæœ¬ç§‘' %}selected{% endif %}>æ™®é€šæœ¬ç§‘</option>
                    <option value="ä¸“ç§‘" {% if type_filter == 'ä¸“ç§‘' %}selected{% endif %}>ä¸“ç§‘</option>
                </select>
            </div>
            <div class="col-md-4 mb-2">
                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 10px; border-radius: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none;">
                    <i class="fas fa-search"></i> ç­›é€‰æŸ¥è¯¢
                </button>
            </div>
        </form>
    </div>
    
    <div class="row">
        {% for university in universities %}
        <div class="col-md-4 mb-4">
            <div class="card h-100" style="border-radius: 12px; border: none; box-shadow: 0 2px 12px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                <div class="card-body">
                    <h5 style="font-weight: 600; margin-bottom: 10px;">{{ university.name }}</h5>
                    <p style="color: #666; margin-bottom: 8px;">
                        <i class="fas fa-map-marker-alt" style="color: #667eea;"></i> 
                        {{ university.province }} {{ university.city }}
                    </p>
                    <p style="margin-bottom: 10px;">
                        {% if university.university_type == '985' %}
                            <span style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px;">985å·¥ç¨‹</span>
                        {% elif university.university_type == '211' %}
                            <span style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px;">211å·¥ç¨‹</span>
                        {% elif university.university_type == 'åŒä¸€æµ' %}
                            <span style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px;">åŒä¸€æµ</span>
                        {% else %}
                            <span style="background: #e0e0e0; color: #333; padding: 4px 12px; border-radius: 20px; font-size: 12px;">{{ university.university_type }}</span>
                        {% endif %}
                    </p>
                    {% if university.ranking %}
                    <p style="color: #888; font-size: 14px; margin-bottom: 15px;">
                        <i class="fas fa-trophy" style="color: #ffa500;"></i> å…¨å›½æ’åï¼š{{ university.ranking }}
                    </p>
                    {% endif %}
                    <a href="{% url 'university_detail' university.pk %}" class="btn btn-sm" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; padding: 8px 20px;">
                        æŸ¥çœ‹è¯¦æƒ… <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="text-center" style="padding: 60px 20px; background: #f8f9fa; border-radius: 12px;">
                <i class="fas fa-university" style="font-size: 48px; color: #ccc; margin-bottom: 20px;"></i>
                <p style="color: #666; font-size: 16px;">æš‚æ— ç¬¦åˆæ¡ä»¶çš„å¤§å­¦æ•°æ®</p>
                <p style="color: #999; font-size: 14px;">è¯·å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶</p>
            </div>
        </div>
        {% endfor %}
    </div>
    
    {% if universities %}
    <div class="text-center mt-4" style="color: #666;">
        <p>å…±æ‰¾åˆ° <strong style="color: #667eea;">{{ universities.count }}</strong> æ‰€å¤§å­¦</p>
    </div>
    {% endif %}
</div>

<style>
.card:hover {
    transform: translateY(-5px);
}
</style>
{% endblock %}
